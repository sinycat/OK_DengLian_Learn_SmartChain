# ç¼–å†™åˆçº¦Scoreï¼Œâ½¤äºŽè®°å½•å­¦â½£ï¼ˆåœ°å€ï¼‰åˆ†æ•°

### æ»¡è¶³ä»¥ä¸‹æ¡ä»¶:

   * ä»…æœ‰â½¼å¸ˆï¼ˆâ½¤modifieræƒé™æŽ§åˆ¶ï¼‰å¯ä»¥æ·»åŠ å’Œä¿®æ”¹å­¦â½£åˆ†æ•°

   * åˆ†æ•°ä¸å¯ä»¥â¼¤äºŽ 100ï¼› 

   * å…¶ä»–: è®¾ç½®æ·»åŠ è€å¸ˆçš„æ–¹æ³•,ä»¥ç¡®å®šå“ªäº›åˆçº¦åœ°å€å¯ä»¥è®¾ç½®ä¸ºè€å¸ˆ.

     

     #### åˆçº¦éƒ¨ç½²è‡³Rinkebyæµ‹è¯•ç½‘ åœ°å€ä¸º: [0xC4BAaB3c3E778A4423b45D0359d8C9D9d7C1Ed97](https://rinkeby.etherscan.io/address/0xc4baab3c3e778a4423b45d0359d8c9d9d7c1ed97#code)

     

     ä»£ç å¦‚ä¸‹:

     ```javascript
     // SPDX-License-Identifier: MIT
     pragma solidity ^0.8.0;
     
     contract Score{
     
         address public owner;
         mapping (address=>bool) public teachers;
     
         mapping(address=>uint)  scores;
     
         constructor (){
             owner=msg.sender;
         }
     
         //only teacher  can set score
         modifier onlyTeacher() { 
             require(
                 teachers[msg.sender],
                 "Only teacher can use this function ."
             );
             _;
         }
         //only owner can set teacher  
         modifier onlyOwner() { 
             require(
                 msg.sender== owner,
                 "Only owner can set teacher."
             );
             _;
         }
     
         function setTeacher(address addr) public onlyOwner{
             teachers[addr]=true;
         }
     
         function setScore(address student , uint score) public onlyTeacher(){
             require(score<=100,"score can not greater than 100");
             scores[student]=score;
         }
     
         function getScore(address addr) public view returns(uint){
             return scores[addr];
         }
        
     
     }
     ```

     

     

# ç¼–å†™åˆçº¦ Teacher ä½œä¸ºâ½¼å¸ˆï¼Œé€šè¿‡ IScore æŽ¥â¼è°ƒâ½¤ä¿®æ”¹å­¦â½£åˆ†æ•°

### æ»¡è¶³ä»¥ä¸‹æ¡ä»¶:

   * åˆçº¦åˆ›å»ºæ—¶å€™å°†å·²ç»éƒ¨ç½²çš„Scoreåˆçº¦åœ°å€ä¼ å…¥,é€šè¿‡IScoreæŽ¥å£åˆ›å»ºå®žä¾‹.è°ƒç”¨æ–¹æ³•.

     

#### åˆçº¦éƒ¨ç½²è‡³Rinkebyæµ‹è¯•ç½‘, åœ°å€ä¸º: [0x704f9CE12cE5fb4c76d1F3C3d1682460A0c1DA83](https://rinkeby.etherscan.io/address/0x704f9ce12ce5fb4c76d1f3c3d1682460a0c1da83#code)

ä»£ç å¦‚ä¸‹:

```javascript
// SPDX-License-Identifier: MIT
pragma solidity ^0.8.0;

interface IScore{

    function setScore(address student , uint score) external ;

}

contract teacher{

    //owner
    IScore scoreContract;

    //éƒ¨ç½²æ—¶å€™ä¼ å…¥Scoreåˆçº¦åœ°å€
    constructor (address addr){
        scoreContract=IScore(addr);

    }

    function setScore(address student , uint score) public{
        return scoreContract.setScore(student,score);

    }

}
```



# æµ‹è¯•

#### ä¸¤ä¸ªåˆçº¦éƒ¨ç½²åŽ, å…ˆåœ¨Scoreåˆçº¦ä¸­è°ƒç”¨`setTeacher()`æ–¹æ³•,è®¾ç½®Teacheråˆçº¦åœ°å€ä¸ºteacher . 

æµ‹è¯•hashåŠå†…å®¹å¦‚ä¸‹: 

```javascript
Transaction Hash:
0xde6bd84609952d71ea080a51410ac939e60b121cae2da25d3b7234ed034b61ad 
Status:
Success
Block:
10270623 3 Block Confirmations
Timestamp:
1 min ago (Mar-04-2022 03:23:54 PM +UTC)
From:
0x2b9307006c93771566db659aa38456fe6127a484 
To:
Contract 0xc4baab3c3e778a4423b45d0359d8c9d9d7c1ed97 
Value:
0 Ether ($0.00)
Transaction Fee:
0.000046289000786913 Ether ($0.00)
Gas Price:
0.000000001000000017 Ether (1.000000017 Gwei)
Gas Limit & Usage by Txn:
69,433 | 46,289 (66.67%)
Gas Fees:
Base: 0.000000017 Gwei |Max: 1.000000036 Gwei |Max Priority: 1 Gwei
Burnt & Txn Savings Fees:
ðŸ”¥ Burnt: 0.000000000000786913 Ether ($0.00)ðŸ’¸ Txn Savings: 0.000000000000879491 Ether ($0.00)
Others:
Txn Type: 2 (EIP-1559) Nonce: 242 Position: 62
Input Data:
Function: setTeacher(address addr)

MethodID: 0x176366c4
[0]:  000000000000000000000000704f9ce12ce5fb4c76d1f3c3d1682460a0c1da83

```



#### ç„¶åŽå³å¯åœ¨Teacheråˆçº¦ä¸­è°ƒç”¨`setScore`æ–¹æ³•,ä¼ å…¥å­¦ç”Ÿåœ°å€å’Œåˆ†æ•°score,è¿›è¡Œè®¾ç½®.

æµ‹è¯•hashåŠå†…å®¹å¦‚ä¸‹:

```javascript
Transaction Hash:
0x9c479c06840582a074fafeff92d35d449befcfa7d85225886c3585f33a1498f2 
Status:
Success
Block:
10270648 2 Block Confirmations
Timestamp:
52 secs ago (Mar-04-2022 03:30:09 PM +UTC)
From:
0x2b9307006c93771566db659aa38456fe6127a484 
To:
 Contract 0x704f9ce12ce5fb4c76d1f3c3d1682460a0c1da83 
Value:
0 Ether ($0.00)
Transaction Fee:
0.000052601000683813 Ether ($0.00)
Gas Price:
0.000000001000000013 Ether (1.000000013 Gwei)
Gas Limit & Usage by Txn:
79,434 | 52,601 (66.22%)
Gas Fees:
Base: 0.000000013 Gwei |Max: 1.000000026 Gwei |Max Priority: 1 Gwei
Burnt & Txn Savings Fees:
ðŸ”¥ Burnt: 0.000000000000683813 Ether ($0.00)ðŸ’¸ Txn Savings: 0.000000000000683813 Ether ($0.00)
Others:
Txn Type: 2 (EIP-1559) Nonce: 243 Position: 94
Input Data:
Function: setScore(address student, uint256 score)

MethodID: 0xee0fcc75
[0]:  000000000000000000000000910666103d06a21c801e0dd14aba1c15cb9490f5
[1]:  0000000000000000000000000000000000000000000000000000000000000050

```



è°ƒç”¨`setScore`å‡½æ•°å®ŒæˆåŽ,å³å¯åœ¨Scoreåˆçº¦ä¸­æŸ¥è¯¢è®¾ç½®çš„scoreæ•°å€¼. 

æŸ¥è¯¢è°ƒç”¨`getScore`å‡½æ•°å¦‚ä¸‹:
![getScore](https://github.com/sinycat/image1/blob/main/%E6%90%9C%E7%8B%97%E6%88%AA%E5%9B%BE20220304233723.png)

